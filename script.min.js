console.log("Start");const game={word:"corazon",lang:"",init(){console.info("Init."),this.lang||(this.lang="all"),this.word=prompt("Enter a word",""),this.word=this.word.trim(),this.word||(this.word=this.randomWord()),this.vizStep=0,this.death=16;let t=document.getElementsByTagName("section");t&&t[0]&&t[0].remove();let e=document.createElement("section"),s=document.getElementsByTagName("article")[0];s.appendChild(e),this.game=s,this.board=e,this.mask(),this.letters=this.setLetters(),this.populateLetters(),this.vizInit(),this.score=0},mask(){let t=this.word,e=document.createElement("ol");e.classList.add("mask");for(var s=0;s<t.length;s++){let i=document.createElement("li");console.log(t[s])," "==t[s]&&i.classList.add("space"),e.appendChild(i)}this.masker=e,this.fullScore=t.split(" ").join("").length,this.board.appendChild(e)},populateLetters(){let t=document.createElement("ol");t.classList.add("letters");for(var e=0;e<this.letters.length;e++){let s=document.createElement("button");s.type="button",s.textContent=this.letters[e],s.classList.add("letter-"+this.letters[e]);let i=document.createElement("li");i.appendChild(s),t.appendChild(i)}this.board.appendChild(t),t.addEventListener("click",this.letterClick.bind(this))},setLetters(){for(var t=[],e="A".charCodeAt(0),s="Z".charCodeAt(0),i=e;i<=s;++i)t.push(String.fromCharCode(i));return"fi"!=this.lang&&"all"!=this.lang||(t.push("Å"),t.push("Ä"),t.push("Ö")),"es"!=this.lang&&"all"!=this.lang||t.push("Ñ"),t},letterClick(t){let e=t.target,s=this.word;if(s=s.toUpperCase(),console.log(this),"BUTTON"==e.tagName){e.disabled=!0;let t=e.textContent;console.log(s,t);let i=0,n=[];console.log(s,t,i);let l=s.split("");for(;i<s.length;)l[i]==t&&n.push(i),i++;if(n.length){for(let e=0;e<n.length;e++)this.masker.children[n[e]].textContent=t,this.score++;this.score==this.fullScore&&this.win()}else this.visualize()}},vizInit(){let t=document.getElementsByTagName("svg")[0],e=t.getElementsByClassName("progress")[0],s=e.children.length;for(var i=0;i<s;i++)e.children[i].removeAttribute("style");this.death=s,this.viz=t},visualize(){this.vizStep++,this.vizStep<this.death?this.game.setAttribute("data-step",this.vizStep):window.setTimeout(function(){this.die()}.bind(this),500),this.viz.getElementsByClassName("progress")[0].children[this.vizStep-1].setAttribute("style","opacity:1")},die(){document.body.classList.add("death");let t=document.createElement("div");t.classList.add("death-screen"),t.classList.add("screen");let e=document.createElement("h1");e.textContent="☠",t.appendChild(e);let s=document.createElement("button");s.textContent="New Game",s.type="button",s.addEventListener("click",function(){t.remove(),this.init()}.bind(this)),t.appendChild(s),document.body.appendChild(t)},win(){document.body.classList.add("win");let t=document.createElement("div");t.classList.add("win-screen"),t.classList.add("screen");let e=document.createElement("h1");e.textContent="✌︎",t.appendChild(e);let s=document.createElement("button");s.textContent="New Game",s.type="button",s.addEventListener("click",function(){t.remove(),this.init()}.bind(this)),t.appendChild(s),document.body.appendChild(t)},randomWord(){let t=this.wordList();return t[Math.floor(Math.random()*t.length)]},wordList:()=>["koira","kissa","omena","manzana","gato","perro","corazon","sydän","apina","sukset","laskettelu","koti"]};game.init();